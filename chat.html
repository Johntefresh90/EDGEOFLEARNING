<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat with MIXI - EDGE AI Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        'primary-dark': '#4A49B8'
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Space+Grotesk:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: #0a0a0a;
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Liquid Glass Background */
        .liquid-glass-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 80%, rgba(93, 92, 222, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 0% 100%, rgba(120, 119, 198, 0.2) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 50%, #0f0f0f 100%);
            z-index: -2;
        }

        .liquid-glass-bg::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(ellipse at top, rgba(93, 92, 222, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at bottom, rgba(120, 119, 198, 0.1) 0%, transparent 50%);
            animation: liquidFlow 15s ease-in-out infinite;
        }

        @keyframes liquidFlow {
            0%, 100% { 
                background: 
                    radial-gradient(ellipse at top, rgba(93, 92, 222, 0.1) 0%, transparent 50%),
                    radial-gradient(ellipse at bottom, rgba(120, 119, 198, 0.1) 0%, transparent 50%);
            }
            50% { 
                background: 
                    radial-gradient(ellipse at top, rgba(120, 119, 198, 0.2) 0%, transparent 60%),
                    radial-gradient(ellipse at bottom, rgba(93, 92, 222, 0.15) 0%, transparent 60%);
            }
        }

        /* Chat Container */
        .chat-container {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 25px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
        }

        .chat-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, rgba(93, 92, 222, 0.8), transparent);
            animation: topGlow 3s ease-in-out infinite;
        }

        @keyframes topGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        /* Chat Header */
        .chat-header {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
        }

        /* Chat Messages Area */
        .chat-messages {
            height: 500px;
            overflow-y: auto;
            padding: 20px;
            scroll-behavior: smooth;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: rgba(93, 92, 222, 0.5);
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: rgba(93, 92, 222, 0.7);
        }

        /* Message Bubbles */
        .message-bubble {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 16px 20px;
            margin-bottom: 16px;
            position: relative;
            animation: messageSlideIn 0.4s ease-out;
            max-width: 80%;
        }

        .message-bubble.user {
            background: rgba(93, 92, 222, 0.2);
            border-color: rgba(93, 92, 222, 0.3);
            margin-left: auto;
            margin-right: 0;
        }

        .message-bubble.ai {
            background: rgba(255, 255, 255, 0.08);
            border-color: rgba(255, 255, 255, 0.15);
            margin-left: 0;
            margin-right: auto;
        }

        @keyframes messageSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Typing Indicator */
        .typing-indicator {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 16px 20px;
            margin-bottom: 16px;
            max-width: 80%;
            margin-left: 0;
            margin-right: auto;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
            align-items: center;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: rgba(93, 92, 222, 0.8);
            border-radius: 50%;
            animation: typingDot 1.5s ease-in-out infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typingDot {
            0%, 60%, 100% { transform: scale(1); opacity: 0.5; }
            30% { transform: scale(1.3); opacity: 1; }
        }

        /* Chat Input Area */
        .chat-input-area {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding: 20px;
            position: relative;
        }

        .chat-input-container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            display: flex;
            align-items: center;
            padding: 8px;
            transition: all 0.3s ease;
        }

        .chat-input-container:focus-within {
            border-color: rgba(93, 92, 222, 0.6);
            box-shadow: 0 0 20px rgba(93, 92, 222, 0.3);
        }

        .chat-input {
            background: transparent;
            border: none;
            outline: none;
            color: #ffffff;
            font-size: 16px;
            flex: 1;
            padding: 12px 16px;
            font-family: 'Inter', sans-serif;
        }

        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        /* Chat Buttons */
        .chat-btn {
            background: rgba(93, 92, 222, 0.2);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(93, 92, 222, 0.3);
            border-radius: 50%;
            width: 45px;
            height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-left: 8px;
        }

        .chat-btn:hover {
            background: rgba(93, 92, 222, 0.4);
            transform: scale(1.1);
            box-shadow: 0 5px 15px rgba(93, 92, 222, 0.4);
        }

        .chat-btn:active {
            transform: scale(0.95);
        }

        .chat-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* MIXI Avatar */
        .mixi-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, rgba(93, 92, 222, 0.3), rgba(120, 119, 198, 0.2));
            backdrop-filter: blur(15px);
            border: 2px solid rgba(93, 92, 222, 0.4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            animation: avatarPulse 4s ease-in-out infinite;
        }

        @keyframes avatarPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .mixi-avatar::before {
            content: '';
            position: absolute;
            top: 20%;
            left: 20%;
            width: 60%;
            height: 60%;
            background: radial-gradient(circle, rgba(93, 92, 222, 0.4) 0%, transparent 70%);
            border-radius: 50%;
            animation: innerGlow 3s ease-in-out infinite;
        }

        @keyframes innerGlow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 0.8; }
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .quick-action-btn {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-action-btn:hover {
            background: rgba(93, 92, 222, 0.2);
            border-color: rgba(93, 92, 222, 0.4);
            transform: translateY(-2px);
        }

        /* Message Metadata */
        .message-meta {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Online Status */
        .online-status {
            width: 12px;
            height: 12px;
            background: #00ff88;
            border-radius: 50%;
            animation: statusPulse 2s ease-in-out infinite;
        }

        @keyframes statusPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        /* Loading Animation */
        .message-loading {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            opacity: 0.7;
        }

        .loading-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(93, 92, 222, 0.3);
            border-top: 2px solid #5D5CDE;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .chat-messages {
                height: 400px;
            }
            
            .message-bubble {
                max-width: 90%;
            }
            
            .chat-input {
                font-size: 16px; /* Prevent zoom on iOS */
            }
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.6s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Liquid Glass Background -->
    <div class="liquid-glass-bg"></div>

    <!-- Main Chat Interface -->
    <div class="min-h-screen flex items-center justify-center p-4 relative z-10">
        <div class="w-full max-w-4xl">
            <!-- Back Button -->
            <button id="backBtn" class="mb-6 flex items-center space-x-2 text-white/70 hover:text-white transition-colors">
                <i data-lucide="arrow-left" class="w-5 h-5"></i>
                <span>Back to Dashboard</span>
            </button>

            <!-- Chat Container -->
            <div class="chat-container fade-in">
                <!-- Chat Header -->
                <div class="chat-header p-6">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="mixi-avatar">
                                <i data-lucide="brain-circuit" class="w-6 h-6 text-white z-10 relative"></i>
                            </div>
                            <div>
                                <h2 class="text-xl font-bold text-white">MIXI</h2>
                                <div class="flex items-center space-x-2">
                                    <div class="online-status"></div>
                                    <span class="text-sm text-white/70">AI Career Assistant</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Header Actions -->
                        <div class="flex items-center space-x-3">
                            <button id="clearChatBtn" class="chat-btn" title="Clear Chat">
                                <i data-lucide="trash-2" class="w-5 h-5 text-white"></i>
                            </button>
                            <button id="voiceModeBtn" class="chat-btn" title="Voice Mode">
                                <i data-lucide="mic" class="w-5 h-5 text-white"></i>
                            </button>
                            <button id="settingsBtn" class="chat-btn" title="Settings">
                                <i data-lucide="settings" class="w-5 h-5 text-white"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Chat Messages -->
                <div id="chatMessages" class="chat-messages">
                    <!-- Welcome Message -->
                    <div class="message-bubble ai">
                        <div class="flex items-start space-x-3">
                            <div class="mixi-avatar" style="width: 32px; height: 32px; min-width: 32px;">
                                <i data-lucide="brain-circuit" class="w-4 h-4 text-white z-10 relative"></i>
                            </div>
                            <div class="flex-1">
                                <div class="font-medium text-white mb-2">MIXI</div>
                                <p class="text-white/90">
                                    Hello! I'm MIXI, your AI career assistant. I'm here to help you with career guidance, learning paths, job searches, and answering any questions about your professional journey. How can I assist you today?
                                </p>
                                <div class="message-meta">
                                    <i data-lucide="check-check" class="w-3 h-3"></i>
                                    <span>Just now</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Quick Actions -->
                <div class="px-6">
                    <div class="quick-actions">
                        <button class="quick-action-btn" data-message="Help me choose a career path">
                            🎯 Career Path Guidance
                        </button>
                        <button class="quick-action-btn" data-message="What skills should I learn for software engineering?">
                            💻 Skill Recommendations
                        </button>
                        <button class="quick-action-btn" data-message="How can I improve my resume?">
                            📄 Resume Help
                        </button>
                        <button class="quick-action-btn" data-message="Find job opportunities in my field">
                            🔍 Job Search
                        </button>
                        <button class="quick-action-btn" data-message="Prepare me for interviews">
                            🎤 Interview Prep
                        </button>
                    </div>
                </div>

                <!-- Chat Input -->
                <div class="chat-input-area">
                    <div class="chat-input-container">
                        <button id="attachBtn" class="chat-btn" style="margin-left: 0; margin-right: 8px;" title="Attach File">
                            <i data-lucide="paperclip" class="w-5 h-5 text-white"></i>
                        </button>
                        
                        <input 
                            type="text" 
                            id="messageInput" 
                            class="chat-input" 
                            placeholder="Ask MIXI anything about your career..."
                            maxlength="500"
                        >
                        
                        <button id="emojiBtn" class="chat-btn" title="Add Emoji">
                            <i data-lucide="smile" class="w-5 h-5 text-white"></i>
                        </button>
                        
                        <button id="sendBtn" class="chat-btn" title="Send Message">
                            <i data-lucide="send" class="w-5 h-5 text-white"></i>
                        </button>
                    </div>
                    
                    <!-- Character Counter -->
                    <div class="text-right mt-2">
                        <span id="charCounter" class="text-xs text-white/50">0/500</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 opacity-0 pointer-events-none transition-opacity duration-500">
        <div class="text-center text-white">
            <div class="loading-spinner w-12 h-12 mx-auto mb-4"></div>
            <p class="text-lg">MIXI is thinking...</p>
        </div>
    </div>

    <script>
        // Initialize Lucide icons
        lucide.createIcons();

        // Global variables
        let isTyping = false;
        let conversationHistory = [];

        // DOM elements
        const chatMessages = document.getElementById('chatMessages');
        const messageInput = document.getElementById('messageInput');
        const sendBtn = document.getElementById('sendBtn');
        const charCounter = document.getElementById('charCounter');
        const loadingOverlay = document.getElementById('loadingOverlay');

        // Initialize chat functionality
        document.addEventListener('DOMContentLoaded', function() {
            initializeChat();
        });

        function initializeChat() {
            // Message input handlers
            messageInput.addEventListener('input', handleInputChange);
            messageInput.addEventListener('keypress', handleKeyPress);
            
            // Send button handler
            sendBtn.addEventListener('click', sendMessage);
            
            // Quick action buttons
            document.querySelectorAll('.quick-action-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const message = this.getAttribute('data-message');
                    messageInput.value = message;
                    sendMessage();
                });
            });
            
            // Header action buttons
            document.getElementById('clearChatBtn').addEventListener('click', clearChat);
            document.getElementById('voiceModeBtn').addEventListener('click', toggleVoiceMode);
            document.getElementById('settingsBtn').addEventListener('click', openSettings);
            document.getElementById('backBtn').addEventListener('click', goBack);
            
            // Emoji button
            document.getElementById('emojiBtn').addEventListener('click', showEmojiPicker);
            
            // Initialize background animation
            initializeBackgroundAnimation();
        }

        function handleInputChange() {
            const length = messageInput.value.length;
            charCounter.textContent = `${length}/500`;
            
            // Update button state
            if (length > 0 && !isTyping) {
                sendBtn.classList.remove('disabled');
            } else {
                sendBtn.classList.add('disabled');
            }
        }

        function handleKeyPress(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        }

        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message || isTyping) return;
            
            // Add user message to chat
            addMessage(message, 'user');
            
            // Clear input
            messageInput.value = '';
            handleInputChange();
            
            // Show typing indicator
            showTypingIndicator();
            
            try {
                // Register Poe handler if available
                if (window.Poe) {
                    await sendToMIXI(message);
                } else {
                    // Fallback response
                    setTimeout(() => {
                        hideTypingIndicator();
                        addMessage(getFallbackResponse(message), 'ai');
                    }, 2000);
                }
            } catch (error) {
                console.error('Error sending message:', error);
                hideTypingIndicator();
                addMessage("I'm sorry, I'm having trouble connecting right now. Please try again in a moment.", 'ai');
            }
        }

        // Register Poe handler for MIXI responses
        if (window.Poe) {
            window.Poe.registerHandler("mixi-response", (result, context) => {
                hideTypingIndicator();
                
                const responses = result.responses;
                if (responses && responses.length > 0) {
                    const message = responses[0];
                    
                    if (message.status === "error") {
                        addMessage("I'm sorry, I encountered an error. Please try asking your question again.", 'ai');
                    } else if (message.status === "incomplete") {
                        // For streaming responses
                        if (!context.messageElement) {
                            context.messageElement = addMessage("", 'ai', true);
                        }
                        updateMessage(context.messageElement, message.content);
                    } else if (message.status === "complete") {
                        // Final response
                        if (context.messageElement) {
                            updateMessage(context.messageElement, message.content);
                            context.messageElement.classList.remove('streaming');
                        } else {
                            addMessage(message.content, 'ai');
                        }
                        
                        // Store in conversation history
                        conversationHistory.push({
                            user: context.userMessage,
                            ai: message.content,
                            timestamp: new Date().toISOString()
                        });
                    }
                }
            });
        }

        async function sendToMIXI(message) {
            // Build context from conversation history
            let contextualPrompt = `@Claude-Sonnet-4 You are MIXI, an AI career assistant specializing in career guidance, education, and professional development. 

Your personality:
- Helpful and knowledgeable about careers and education
- Professional but friendly and approachable
- Provides practical, actionable advice
- Encourages continuous learning and growth
- Remembers conversation context

Recent conversation:
${conversationHistory.slice(-3).map(conv => `User: ${conv.user}\nMIXI: ${conv.ai}`).join('\n\n')}

Current user message: ${message}

Respond as MIXI with helpful career guidance. Keep responses conversational, informative, and encouraging. If the question is about career paths, provide specific advice. If it's about skills, suggest learning resources. If it's about jobs, offer search strategies.`;

            await window.Poe.sendUserMessage(contextualPrompt, {
                handler: "mixi-response",
                stream: true,
                openChat: false,
                handlerContext: { 
                    userMessage: message,
                    messageElement: null 
                }
            });
        }

        function addMessage(content, sender, isStreaming = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message-bubble ${sender} ${isStreaming ? 'streaming' : ''}`;
            
            const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            if (sender === 'user') {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-3 flex-row-reverse">
                        <div class="w-8 h-8 bg-gradient-to-br from-primary to-purple-600 rounded-full flex items-center justify-center min-w-8">
                            <i data-lucide="user" class="w-4 h-4 text-white"></i>
                        </div>
                        <div class="flex-1 text-right">
                            <div class="font-medium text-white mb-2">You</div>
                            <p class="text-white/90">${content}</p>
                            <div class="message-meta justify-end">
                                <span>${time}</span>
                                <i data-lucide="check-check" class="w-3 h-3"></i>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-3">
                        <div class="mixi-avatar" style="width: 32px; height: 32px; min-width: 32px;">
                            <i data-lucide="brain-circuit" class="w-4 h-4 text-white z-10 relative"></i>
                        </div>
                        <div class="flex-1">
                            <div class="font-medium text-white mb-2">MIXI</div>
                            <div class="message-content">
                                <p class="text-white/90">${content}</p>
                                ${isStreaming ? '<div class="message-loading mt-2"><div class="loading-spinner"></div><span>Thinking...</span></div>' : ''}
                            </div>
                            <div class="message-meta">
                                <i data-lucide="check-check" class="w-3 h-3"></i>
                                <span>${time}</span>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            lucide.createIcons();
            scrollToBottom();
            
            if (isStreaming) {
                return messageDiv.querySelector('.message-content p');
            }
            
            return messageDiv;
        }

        function updateMessage(element, content) {
            if (element) {
                element.textContent = content;
                // Remove loading indicator
                const loading = element.parentNode.querySelector('.message-loading');
                if (loading) loading.remove();
            }
        }

        function showTypingIndicator() {
            if (document.getElementById('typingIndicator')) return;
            
            isTyping = true;
            sendBtn.classList.add('disabled');
            
            const typingDiv = document.createElement('div');
            typingDiv.id = 'typingIndicator';
            typingDiv.className = 'typing-indicator';
            typingDiv.innerHTML = `
                <div class="flex items-start space-x-3">
                    <div class="mixi-avatar" style="width: 32px; height: 32px; min-width: 32px;">
                        <i data-lucide="brain-circuit" class="w-4 h-4 text-white z-10 relative"></i>
                    </div>
                    <div class="flex-1">
                        <div class="font-medium text-white mb-2">MIXI</div>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>
            `;
            
            chatMessages.appendChild(typingDiv);
            lucide.createIcons();
            scrollToBottom();
        }

        function hideTypingIndicator() {
            const typingIndicator = document.getElementById('typingIndicator');
            if (typingIndicator) {
                typingIndicator.remove();
            }
            isTyping = false;
            handleInputChange();
        }

        function scrollToBottom() {
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function clearChat() {
            if (confirm('Are you sure you want to clear the chat history?')) {
                const messages = chatMessages.querySelectorAll('.message-bubble:not(:first-child)');
                messages.forEach(msg => msg.remove());
                conversationHistory = [];
                showNotification('Chat cleared successfully', 'success');
            }
        }

        function toggleVoiceMode() {
            showNotification('Voice mode feature coming soon!', 'info');
        }

        function openSettings() {
            showNotification('Settings panel coming soon!', 'info');
        }

        function goBack() {
            // Navigate back to dashboard
            window.history.back();
        }

        function showEmojiPicker() {
            const emojis = ['😊', '👍', '❤️', '🎯', '💪', '🔥', '✨', '🚀', '💡', '🎉'];
            const randomEmoji = emojis[Math.floor(Math.random() * emojis.length)];
            messageInput.value += randomEmoji;
            handleInputChange();
            messageInput.focus();
        }

        function getFallbackResponse(message) {
            const responses = [
                "That's a great question! I'd love to help you with your career goals. Could you tell me more about what you're looking for?",
                "I understand you're seeking career guidance. Based on your interests, I can suggest several paths to explore.",
                "Career development is a journey, and I'm here to support you every step of the way. What specific area would you like to focus on?",
                "That's an interesting career question! Let me share some insights that might help you move forward.",
                "I'm here to help you succeed in your career journey. What challenges are you currently facing?"
            ];
            return responses[Math.floor(Math.random() * responses.length)];
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg transition-all duration-300 transform translate-x-full`;
            
            switch(type) {
                case 'success':
                    notification.classList.add('bg-green-500', 'text-white');
                    break;
                case 'error':
                    notification.classList.add('bg-red-500', 'text-white');
                    break;
                case 'warning':
                    notification.classList.add('bg-yellow-500', 'text-black');
                    break;
                default:
                    notification.classList.add('bg-blue-500', 'text-white');
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => notification.classList.remove('translate-x-full'), 100);
            setTimeout(() => {
                notification.classList.add('translate-x-full');
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        function initializeBackgroundAnimation() {
            let hue = 0;
            function animateBackground() {
                hue = (hue + 0.3) % 360;
                const bg = document.querySelector('.liquid-glass-bg');
                if (bg) {
                    bg.style.filter = `hue-rotate(${hue}deg)`;
                }
                requestAnimationFrame(animateBackground);
            }
            animateBackground();
        }

        // Auto-focus input on load
        window.addEventListener('load', () => {
            messageInput.focus();
        });

        // Handle page visibility for performance
        document.addEventListener('visibilitychange', function() {
            if (document.hidden) {
                document.querySelectorAll('*').forEach(el => {
                    if (el.style.animationPlayState !== undefined) {
                        el.style.animationPlayState = 'paused';
                    }
                });
            } else {
                document.querySelectorAll('*').forEach(el => {
                    if (el.style.animationPlayState !== undefined) {
                        el.style.animationPlayState = 'running';
                    }
                });
            }
        });
    </script>
</body>
</html>